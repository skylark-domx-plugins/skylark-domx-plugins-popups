{"version":3,"sources":["popups.js"],"names":["define","skylark","stack","attach","around","ref","dpSize","geom","size","popup","dpWidth","width","dpHeight","height","refHeight","doc","ownerDocument","docElem","documentElement","viewWidth","clientWidth","scrollLeft","viewHeight","clientHeight","scrollTop","offset","pagePosition","offsetLeft","left","offsetTop","top","Math","min","abs","bottom","right","open","options","close","count","i","length","popup1","pop","hide"],"mappings":";;;;;;;AAAAA,QACC,oBACC,SAASC,GAEV,IAAIC,KAuFJ,OAAOD,EAAQE,OAAO,uBACrBC,OAhFE,SAAgBC,GACZ,IACIC,EAASC,KAAKC,KAAKC,OACnBC,EAAUJ,EAAOK,MACjBC,EAAWN,EAAOO,OAClBC,EAAYP,KAAKM,OAAOR,GACxBU,EAAMV,EAAIW,cACVC,EAAUF,EAAIG,gBACdC,EAAYF,EAAQG,YAAcb,KAAKc,WAAWN,GAClDO,EAAaL,EAAQM,aAAehB,KAAKiB,UAAUT,GACnDU,EAASlB,KAAKmB,aAAarB,GAC3BsB,EAAaF,EAAOG,KACpBC,EAAYJ,EAAOK,IAYvB,OAVAD,GAAaf,EAEba,GACII,KAAKC,IAAIL,EAAaA,EAAajB,EAAUS,GAAaA,EAAYT,EACtEqB,KAAKE,IAAIN,EAAajB,EAAUS,GAAa,IAO7CW,IALJD,GACIE,KAAKC,IAAIH,EAAaA,EAAYjB,EAAWU,GAAcA,EAAaV,EACxEmB,KAAKE,IAAIrB,EAAWE,EArBX,GAAA,GAyBToB,OAAQT,EAAOS,OACfN,KAAMD,EACNQ,MAAOV,EAAOU,MACdxB,MAAOc,EAAOd,MACdE,OAAQY,EAAOZ,SAmDzBuB,KArCD,SAAc3B,EAAM4B,GACfA,EAAQjC,QAqCZkC,MA3BD,SAAe7B,GACd,IAAI8B,EAAQ,EAEZ,GAAI9B,GACH,IAAK,IAAI+B,EAAGtC,EAAMuC,OAAO,EAAGD,GAAG,EAAGA,IACjC,GAAItC,EAAMsC,GAAG/B,OAASA,EAAO,CAC5B8B,EAAQrC,EAAMuC,OAASD,EACvB,YAIFD,EAAQrC,EAAMuC,OAEf,IAASD,EAAE,EAAGA,EAAED,EAAQC,IAAM,CAC7B,IACCE,EADSxC,EAAMyC,MACFlC,MACViC,EAAOE,MACVF,EAAOE","file":"../popups.js","sourcesContent":["define([\r\n\t\"skylark-langx-ns\"\r\n],function(skylark){\r\n\r\n\tvar stack = [];\r\n\r\n\r\n\r\n    /**\r\n    * get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function around(ref) {\r\n        var extraY = 0;\r\n        var dpSize = geom.size(popup);\r\n        var dpWidth = dpSize.width;\r\n        var dpHeight = dpSize.height;\r\n        var refHeight = geom.height(ref);\r\n        var doc = ref.ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + geom.scrollLeft(doc);\r\n        var viewHeight = docElem.clientHeight + geom.scrollTop(doc);\r\n        var offset = geom.pagePosition(ref);\r\n        var offsetLeft = offset.left;\r\n        var offsetTop = offset.top;\r\n\r\n        offsetTop += refHeight;\r\n\r\n        offsetLeft -=\r\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n        offsetTop -=\r\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + refHeight - extraY) : extraY));\r\n\r\n        return {\r\n            top: offsetTop,\r\n            bottom: offset.bottom,\r\n            left: offsetLeft,\r\n            right: offset.right,\r\n            width: offset.width,\r\n            height: offset.height\r\n        };\r\n    }\r\n\r\n\r\n\t/*\r\n\t * Popup the ui elment at the specified position\r\n\t * @param popup  element to display\r\n\t * @param options\r\n\t *  - around {HtmlEleent}\r\n\t *  - at {x,y}\r\n\t *  - parent {}\r\n\t */\r\n\r\n\tfunction open(popup,options) {\r\n\t\tif (options.around) {\r\n\t\t\t//A DOM node that should be used as a reference point for placing the pop-up. \r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Close specified popup and any popups that it parented.\r\n\t * If no popup is specified, closes all popups.\r\n     */\r\n\tfunction close(popup) {\r\n\t\tvar count = 0;\r\n\r\n\t\tif (popup) {\r\n\t\t\tfor (var i= stack.length-1; i>=0; i--) {\r\n\t\t\t\tif (stack[i].popup == popup) {\r\n\t\t\t\t\tcount = stack.length - i; \r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcount = stack.length;\r\n\t\t}\r\n\t\tfor (var i=0; i<count ; i++ ) {\r\n\t\t\tvar top = stack.pop(),\r\n\t\t\t\tpopup1 = top.popup;\r\n\t\t\tif (popup1.hide) {\r\n\t\t\t\tpopup1.hide();\r\n\t\t\t} else {\r\n\r\n\t\t\t}\r\n\r\n\t\t} \r\n\t}\r\n\treturn skylark.attach(\"domx.plugins.popups\",{\r\n\t\taround,\r\n\t\topen,\r\n\t\tclose\r\n\t});\r\n});"]}