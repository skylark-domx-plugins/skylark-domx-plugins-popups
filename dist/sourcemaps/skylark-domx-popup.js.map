{"version":3,"sources":["skylark-domx-popup.js"],"names":["define","skylark","attach","geom","popups","calcOffset","popup","ref","dpSize","size","dpWidth","width","dpHeight","height","refHeight","doc","ownerDocument","docElem","documentElement","viewWidth","clientWidth","scrollLeft","viewHeight","clientHeight","scrollTop","offset","pagePosition","offsetLeft","left","offsetTop","top","Math","min","abs","bottom","right","main"],"mappings":";;;;;;;g4BAAAA,EAAA,6BACA,oBACA,SAAAC,GACA,OAAAA,EAAAC,OAAA,oBAEAF,EAAA,iCACA,oBACA,YACA,SACAG,EACAC,GAwCA,OAAAA,EAAAC,WAlCA,SAAAC,EAAAC,GACA,IACAC,EAAAL,EAAAM,KAAAH,GACAI,EAAAF,EAAAG,MACAC,EAAAJ,EAAAK,OACAC,EAAAX,EAAAU,OAAAN,GACAQ,EAAAT,EAAAU,cACAC,EAAAF,EAAAG,gBACAC,EAAAF,EAAAG,YAAAjB,EAAAkB,WAAAN,GACAO,EAAAL,EAAAM,aAAApB,EAAAqB,UAAAT,GACAU,EAAAtB,EAAAuB,aAAAnB,GACAoB,EAAAF,EAAAG,KACAC,EAAAJ,EAAAK,IAYA,OAVAD,GAAAf,EAEAa,GACAI,KAAAC,IAAAL,EAAAA,EAAAjB,EAAAS,GAAAA,EAAAT,EACAqB,KAAAE,IAAAN,EAAAjB,EAAAS,GAAA,IAOAW,IALAD,GACAE,KAAAC,IAAAH,EAAAA,EAAAjB,EAAAU,GAAAA,EAAAV,EACAmB,KAAAE,IAAArB,EAAAE,EArBA,GAAA,GAyBAoB,OAAAT,EAAAS,OACAN,KAAAD,EACAQ,MAAAV,EAAAU,MACAxB,MAAAc,EAAAd,MACAE,OAAAY,EAAAZ,WAOAb,EAAA,2BACA,WACA,gBACA,SAAAI,GACA,OAAAA,IAEAJ,EAAA,sBAAA,2BAAA,SAAAoC,GAAA,OAAAA","file":"../skylark-domx-popup.js","sourcesContent":["define('skylark-domx-popup/popups',[\r\n\t\"skylark-langx-ns\"\r\n],function(skylark){\r\n\treturn skylark.attach(\"domx.popups\",{});\r\n});\ndefine('skylark-domx-popup/calcOffset',[\r\n\t\"skylark-domx-geom\",\r\n\t\"./popups\"\r\n],function(\r\n\tgeom,\r\n\tpopups\r\n){\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function calcOffset(popup, ref) {\r\n        var extraY = 0;\r\n        var dpSize = geom.size(popup);\r\n        var dpWidth = dpSize.width;\r\n        var dpHeight = dpSize.height;\r\n        var refHeight = geom.height(ref);\r\n        var doc = popup.ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + geom.scrollLeft(doc);\r\n        var viewHeight = docElem.clientHeight + geom.scrollTop(doc);\r\n        var offset = geom.pagePosition(ref);\r\n        var offsetLeft = offset.left;\r\n        var offsetTop = offset.top;\r\n\r\n        offsetTop += refHeight;\r\n\r\n        offsetLeft -=\r\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n        offsetTop -=\r\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + refHeight - extraY) : extraY));\r\n\r\n        return {\r\n            top: offsetTop,\r\n            bottom: offset.bottom,\r\n            left: offsetLeft,\r\n            right: offset.right,\r\n            width: offset.width,\r\n            height: offset.height\r\n        };\r\n    }\r\n\r\n    return popups.calcOffset = calcOffset;\r\n\t\t\r\n});\ndefine('skylark-domx-popup/main',[\r\n\t\"./popups\",\r\n\t\"./calcOffset\"\r\n],function(popups){\r\n\treturn popups;\r\n});\ndefine('skylark-domx-popup', ['skylark-domx-popup/main'], function (main) { return main; });\n\n"]}